(function(){function p(e){function S(t,n,v){var m,g,y,b;if(!t[i])return;m=f?0:t[i][u]-1,g=f?t[i][u]:-1;v!=s&&(m=v+l);for(;m!=g;m+=l){y=t[i][r](m);if(d.test(y)&&e[o]({line:n,ch:m+1}).type==c){b=h[y];if(b[r](1)==">"==f)p.push(y);else{if(p.pop()!=b[r](0))return{pos:m,match:a};if(!p[u])return{pos:m,match:!0}}}}}var f,l,c,p,d,v,m,g,y=e.getCursor(),b=e[t](y[n]),w=y.ch-1,E=w>=0&&h[b[i][r](w)]||h[b[i][r](++w)];if(!E)return s;f=E[r](1)==">",l=f?1:-1;c=e[o]({line:y[n],ch:w+1}).type;p=[b[i][r](w)],d=/[(){}[\]]/;for(v=y[n],g=f?Math.min(v+100,e.lineCount()):Math.max(-1,v-100);v!=g;v+=l){v==y[n]?m=S(b,v,w):m=S(e[t](v),v);if(m)break}return{from:{line:y[n],ch:w},to:m&&{line:v,ch:m.pos},match:m&&m.match}}function d(e,t){var r,i,s,o,u=p(e);if(!u)return;r=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";i=e.markText(u.from,{line:u.from[n],ch:u.from.ch+1},{className:r});s=u.to&&e.markText(u.to,{line:u.to[n],ch:u.to.ch+1},{className:r});o=function(){e.operation(function(){i.clear();s&&s.clear()})};if(!t)return o;setTimeout(o,800)}function v(t){t.operation(function(){if(e){e();e=s}t.somethingSelected()||(e=d(t,a))})}var e,t="getLineHandle",n="line",r="charAt",i="text",s=null,o="getTokenAt",u="length",a=!1,f="matchBrackets",l="cursorActivity",c="defineExtension",h={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};e=s;CodeMirror.defineOption(f,a,function(e,t){t?e.on(l,v):e.off(l,v)});CodeMirror[c](f,function(){d(this,!0)});CodeMirror[c]("findMatchingBracket",function(){return p(this)})})();